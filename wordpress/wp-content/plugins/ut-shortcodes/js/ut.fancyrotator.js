(function(b){b.fn.utfancyrotate=function(h){b.extend({effect:"fxSlideForward"},h);return this.each(function(){function e(a){if(f)return!1;f=!0;var b=0,d=k[c];"next"===a?c=c<n-1?c+1:0:"prev"===a&&(c=0<c?c-1:n-1);var e=k[c],l=function(){this.removeEventListener(g,l);classie.removeClass(this,"current");classie.removeClass(this,"next"===a?"navOutNext":"navOutPrev");++b;2===b&&(f=!1)},m=function(){this.removeEventListener(g,m);classie.addClass(this,"current");classie.removeClass(this,"next"===a?"navInNext": "navInPrev");++b;2===b&&(f=!1)};h.animations?(d.addEventListener(g,l),e.addEventListener(g,m)):(l(),m());classie.addClass(d,"next"===a?"navOutNext":"navOutPrev");classie.addClass(e,"next"===a?"navInNext":"navInPrev")}var h={animations:Modernizr.cssanimations},g={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[Modernizr.prefixed("animation")],k=b(this).find("ul").children(),c=0,n=k.length,d=b(this).find("nav"),p=d.find(".next"), d=d.find(".prev"),f=!1;p.click(function(a){e("next");a.preventDefault()});d.click(function(a){e("prev");a.preventDefault()})})}})(jQuery);